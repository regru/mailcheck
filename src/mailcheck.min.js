/*1.0.3*/var Kicksend={mailcheck:{threshold:3,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","outlook.com"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],run:function(a){a.domains=a.domains||Kicksend.mailcheck.defaultDomains,a.topLevelDomains=a.topLevelDomains||Kicksend.mailcheck.defaultTopLevelDomains,a.distanceFunction=a.distanceFunction||Kicksend.sift3Distance;var b=Kicksend.mailcheck.suggest(a.email,a.domains,a.topLevelDomains,a.distanceFunction);b?a.suggested&&a.suggested(b):a.empty&&a.empty()},suggest:function(a,b,c,d){a=a.toLowerCase();for(var e=this.splitEmail(a),f=[],g=0;g<e.length;g++){var h=this.findClosestDomain(e[g].domain,b,d);if(h)h!=e[g].domain&&f.push({address:e[g].address,domain:h,full:e[g].address+"@"+h,original:e[g].address+"@"+e[g].domain});else{var i=this.findClosestDomain(e[g].topLevelDomain,c);if(e[g].domain&&i&&i!=e[g].topLevelDomain){var j=e[g].domain;h=j.substring(0,j.lastIndexOf(e[g].topLevelDomain))+i,f.push({address:e[g].address,domain:h,full:e[g].address+"@"+h,original:e[g].address+"@"+e[g].domain})}}}return 0==f.length?!1:1==f.length?f[0]:f},findClosestDomain:function(a,b,c){var d,e=99,f=null;if(!a||!b)return!1;c||(c=this.sift3Distance);for(var g=0;g<b.length;g++){if(a===b[g])return a;d=c(a,b[g]),e>d&&(e=d,f=b[g])}return e<=this.threshold&&null!==f?f:!1},sift3Distance:function(a,b){if(null==a||0===a.length)return null==b||0===b.length?0:b.length;if(null==b||0===b.length)return a.length;for(var c=0,d=0,e=0,f=0,g=5;c+d<a.length&&c+e<b.length;){if(a.charAt(c+d)==b.charAt(c+e))f++;else{d=0,e=0;for(var h=0;g>h;h++){if(c+h<a.length&&a.charAt(c+h)==b.charAt(c)){d=h;break}if(c+h<b.length&&a.charAt(c)==b.charAt(c+h)){e=h;break}}}c++}return(a.length+b.length)/2-f},splitEmail:function(a){for(var b=a.split(","),c=[],d=0;d<b.length;d++){var e=b[d].trim().split("@");if(e.length<2)return!1;for(var f=0;f<e.length;f++)if(""===e[f])return!1;var g=e.pop(),h=g.split("."),i="";if(0==h.length)return!1;if(1==h.length)i=h[0];else{for(var f=1;f<h.length;f++)i+=h[f]+".";h.length>=2&&(i=i.substring(0,i.length-1))}c.push({topLevelDomain:i,domain:g,address:e.join("@")})}return c}}};"undefined"!=typeof module&&module.exports&&(module.exports=Kicksend.mailcheck),"undefined"!=typeof window&&window.jQuery&&!function(a){a.fn.mailcheck=function(a){var b=this;if(a.suggested){var c=a.suggested;a.suggested=function(a){c(b,a)}}if(a.empty){var d=a.empty;a.empty=function(){d.call(null,b)}}a.email=this.val(),Kicksend.mailcheck.run(a)}}(jQuery);